// Version: 1.2

syntax = "proto3";
import "version.proto";
import "utils.proto";
import "motor.proto";
import "geometry.proto";

enum MotorDirection {
	MOTOR_DIRECTION_UNDEFINED = 0;
	UP = 1;
	DOWN = 2;
	LEFT = 3;
	RIGHT = 4;
	CLOCKWISE = 5;
	COUNTER_CLOCKWISE = 6;
	OPENING = 7;
	CLOSING = 8;
	NOT_MOVING = 9;
}

enum LaserState {
	LASER_STATE_UNDEFINED = 0;
	ON = 1;
	OFF = 2;
}

message Coordinates {
	float x = 1;
	float y = 2;
	float z = 3;
}

message MotorData {
	bool is_moving = 1;
	bool is_limit_switch_pressed = 2;
	MotorDirection direction = 3;

	int32 current_step = 4;
	int32 target_step = 5;
}

message JointAngleData {
	float swivel_st = 1;
	float shoulder_st = 2;
	float elbow_st = 3;
	float roll_st = 4;
	float wrist_pitch_st = 5;

	float swivel_mt = 6;
	float shoulder_mt = 7;
	float elbow_mt = 8;
	float roll_mt = 9;
	float wrist_pitch_mt = 10;
}

message MotorCommand {
	// Debug control: Move by individual steps
	int32 move_steps = 1;

	// Precise control: Move by radians
	float move_radians = 2;
}

message ArmData {
	// Arm Commands
	Coordinates currentPosition = 1;
	Coordinates targetPosition = 2;

	MotorData base = 3;
	MotorData shoulder = 4;
	MotorData elbow = 5;

	Version version = 6;
  
	//USS data 
 	float USS_distance = 7;

	// Gripper Commands
	MotorData lift = 8;
	MotorData rotate = 9;
	MotorData pinch = 10;

	int32 servoAngle = 11;
	BoolState laserState = 12;
  	JointAngleData = 13;
}

message ArmCommand {
	// General commands for arm
	bool stop = 1;
	bool calibrate = 2;

	// Move individual motors
	MotorCommand swivel = 3;
	MotorCommand shoulder = 4;
	MotorCommand elbow = 5;

	// Needed for IK: If the wrist-lift moves, we need to re-calculate IK to keep the end-effector
	// stationary. See /Arm/src/ik/README.md in the Arm-Firmware repository.
	MotorCommand gripper_lift = 6;

	// Can be removed in future versions
	float ik_x = 7;
	float ik_y = 8;
	float ik_z = 9;

	// Custom actions
	bool jab = 10;

	Version version = 11;
	
	// USS commands
 	BoolState start_USS = 12; 
	
	// Move individual motors
	MotorCommand lift = 13;
	MotorCommand rotate = 14;
	MotorCommand pinch = 15;

	// Custom actions
	bool open = 16;
	bool close = 17;
	bool spin = 18;

	int32 servoAngle = 19;
	BoolState laserState = 20;
}
