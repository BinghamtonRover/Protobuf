// Version: 1.3

syntax = "proto3";

import "status.proto";
import "utils.proto";
import "version.proto";

enum DriveMotor {
	FRONT_LEFT = 0;
	FRONT_RIGHT = 1;
	MIDDLE_LEFT = 3;
	MIDDLE_RIGHT = 4;
	BACK_LEFT = 5;
	BACK_RIGHT = 6;
}

enum ProtoColor {
	PROTO_COLOR_UNDEFINED = 0;
	RED = 1;
	GREEN = 2;
	BLUE = 3;
	UNLIT = 4;
}

enum MotorErrorCode {
	NO_FAULT = 0;
	OVER_TEMP = 1;
	OVER_CURRENT = 2;
	OVER_VOLTAGE = 3;
	UNDER_VOLTAGE = 4;
	ENCODER_FAULT = 5;
	MOSFET_OVER_TEMP = 6;
	UNKNOWN_ERROR = 7;
}

message DriveCommand {
	// The max speed, as a percentage of the rover's possible speed.
	float throttle = 1;

	// Speed of the left wheels, as a percentage of [throttle].
	float left = 2;

	// Speed of the right wheels, as a percentage of [throttle].
	float right = 3;

	// Indicates that [left] = 0 is valid, even though 0 usually means no value.
	bool set_left = 4;

	// Indicates that [right] = 0 is valid, even though 0 usually means no value.
	bool set_right = 5;

	// Indicates that [throttle] = 0 is valid, even though 0 usually means no value.
	bool set_throttle = 6;

	float front_swivel = 7;
	float front_tilt = 8;
	float rear_swivel = 9;
	float rear_tilt = 10;

	RoverStatus status = 11;
	Version version = 12;
	ProtoColor color = 13;
	BoolState blink = 14;
}

message DriveMotorData {
	float speed = 1;
	float current = 2;
	int32 temperature = 3;
	MotorErrorCode error = 4;
}

message DriveData {
	// The max speed, as a percentage of the rover's possible speed.
	float throttle = 1;

	// Speed of the left wheels, as a percentage of [throttle].
	float left = 2;

	// Speed of the right wheels, as a percentage of [throttle].
	float right = 3;

	// Indicates that [left] = 0 is valid, even though 0 usually means no value.
	bool set_left = 4;

	// Indicates that [right] = 0 is valid, even though 0 usually means no value.
	bool set_right = 5;

	// Indicates that [throttle] = 0 is valid, even though 0 usually means no value.
	bool set_throttle = 6;

	float front_swivel = 7;
	float front_tilt = 8;
	float rear_swivel = 9;
	float rear_tilt = 10;

	// Vitals for the whole rover
	float battery_voltage = 11;
	float battery_current = 12;
	float battery_temperature = 13;

	Version version = 14;

	reserved 15 to 20;
	
	ProtoColor color = 21;
	RoverStatus status = 22;
	
	// Contains the DriveMotorData for each corresponding motor
	DriveMotorData front_left_motor = 23;
	DriveMotorData middle_left_motor = 24;
	DriveMotorData back_left_motor = 25;

	DriveMotorData front_right_motor = 26;
	DriveMotorData middle_right_motor = 27;
	DriveMotorData back_right_motor = 28;
}
