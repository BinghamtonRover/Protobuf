// Version: 1.2

syntax = "proto3";

import "status.proto";
import "utils.proto";
import "version.proto";

enum ProtoColor {
	PROTO_COLOR_UNDEFINED = 0;
	RED = 1;
	GREEN = 2;
	BLUE = 3;
	UNLIT = 4;
}

enum MotorErrorCode {
  NO_FAULT = 0;
  MOTOR_OVER_TEMP = 1;
  OVER_CURRENT = 2;
  OVER_VOLTAGE = 3;
  UNDER_VOLTAGE = 4;
  ENCODER_FAULT = 5;
  MOSFET_OVER_TEMP = 6;
  UNKNOWN_ERROR = 7;
}

message DriveCommand {
	// The max speed, as a percentage of the rover's possible speed.
	float throttle = 1;

	// Speed of the left wheels, as a percentage of [throttle].
	float left = 2;

	// Speed of the right wheels, as a percentage of [throttle].
	float right = 3;

	// Indicates that [left] = 0 is valid, even though 0 usually means no value.
	bool set_left = 4;

	// Indicates that [right] = 0 is valid, even though 0 usually means no value.
	bool set_right = 5;

	// Indicates that [throttle] = 0 is valid, even though 0 usually means no value.
	bool set_throttle = 6;

	float front_swivel = 7;
	float front_tilt = 8;
	float rear_swivel = 9;
	float rear_tilt = 10;

	RoverStatus status = 11;
	Version version = 12;
	ProtoColor color = 13;
	BoolState blink = 14;
}

message DriveDataContainer {
  int32 Id = 1;
  float speed= 2;
  float current = 3;
  int32 temperature = 4;
  MotorErrorCode error = 5;
}

message DriveData {
	// The max speed, as a percentage of the rover's possible speed.
	float throttle = 1;

	// Speed of the left wheels, as a percentage of [throttle].
	float left = 2;

	// Speed of the right wheels, as a percentage of [throttle].
	float right = 3;

	// Indicates that [left] = 0 is valid, even though 0 usually means no value.
	bool set_left = 4;

	// Indicates that [right] = 0 is valid, even though 0 usually means no value.
	bool set_right = 5;

	// Indicates that [throttle] = 0 is valid, even though 0 usually means no value.
	bool set_throttle = 6;

	float front_swivel = 7;
	float front_tilt = 8;
	float rear_swivel = 9;
	float rear_tilt = 10;

	// Vitals for the whole rover
	float battery_voltage = 11;
	float battery_current = 12;
	float battery_temperature = 13;

	Version version = 14;

	// Information about each wheel in rpm
	float back_left = 15;
	float middle_left = 16;
	float front_left = 17;

	float back_right = 18;
	float middle_right = 19;
	float front_right = 20;

	ProtoColor color = 21;
	RoverStatus status = 22;
	
	// Contains the Drive Data and Corrsponding CAN ID
	DriveDataContainer back_left_motor = 23;
	DriveDataContainer middle_left_motor = 24;
	DriveDataContainer front_left_motor = 25;

	DriveDataContainer back_right_motor = 26;
	DriveDataContainer middle_right_motor = 27;
	DriveDataContainer front_right_motor = 28;
}
